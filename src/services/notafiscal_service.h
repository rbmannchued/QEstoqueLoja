#ifndef NOTAFISCAL_SERVICE_H
#define NOTAFISCAL_SERVICE_H

#include <QObject>
#include "../repository/notafiscal_repository.h"
#include "../dto/ProdutoNota_dto.h"
enum class NotaErro{
    Nenhum,
    Banco,
    Salvar,
    Update
};

class NotaFiscal_service : public QObject
{
    Q_OBJECT
public:
    struct Resultado {
        bool ok;
        NotaErro erro = NotaErro::Nenhum;
        QString msg;
    };
    explicit NotaFiscal_service(QObject *parent = nullptr);
    NotaFiscal_service::Resultado salvarResNfe(NotaFiscalDTO resumoNota);
    qlonglong getIdFromChave(QString chnfe);
    NotaFiscal_service::Resultado updateWhereChave(NotaFiscalDTO dto, QString chave);
    NotaFiscalDTO lerNotaFiscalDoXML(const QString &xmlPath);
    QList<ProdutoNotaDTO> carregarProdutosDaNFe(const QString &xml_path, qlonglong id_nf);
private:
    notafiscal_repository notaRepo;

signals:
};

#endif // NOTAFISCAL_SERVICE_H
